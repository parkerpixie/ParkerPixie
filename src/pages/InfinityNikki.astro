---
/* src/pages/infinitynikki.astro — v3 */
const year = new Date().getFullYear();
const shots = [
  "/img/Nikki01.JPG",
  "/img/Nikki02.JPG",
  "/img/Nikki03.JPG",
  "/img/Nikki04.jpeg", // note: lower-case .jpeg (your file)
  "/img/Nikki05.JPG",
  "/img/Nikki06.JPG",
  "/img/Nikki07.JPG",
  "/img/Nikki08.JPG",
  "/img/Nikki09.JPG",
  "/img/Nikki10.JPG",
  "/img/Nikki11.JPG",
  "/img/Nikki12.JPG",
  "/img/Nikki13.JPG",
  "/img/Nikki14.JPG",
  "/img/Nikki15.JPG",
  "/img/Nikki16.JPG",
];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Infinity Nikki — ParkerPixiePop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Infinity Nikki gallery — outfits, photo ops, and glitter-goddess energy."
    />
    <link rel="icon" href="/CapyGoldIcon.png" />

    <style>
      :root{
        --bg:#0a0b0f;
        --card:#121522;
        --muted:#a5a9c6;
        --text:#eef0ff;
        --accent:#b792ff;
        --accent-2:#6ed0ff;
        --radius:18px;
      }
      *{box-sizing:border-box}
      html,body{margin:0;height:100%;color:var(--text);background:var(--bg);
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;}
      a{color:inherit;text-decoration:none}
      .wrap{max-width:1180px;margin:0 auto;padding:0 20px}

      /* Page background image */
      .page{
        position:relative; min-height:100dvh; overflow-x:clip;
      }
      .page::before{
        content:""; position:fixed; inset:0; z-index:-2;
        background:
          linear-gradient(180deg, rgba(10,11,15,.25), rgba(10,11,15,.85) 70%),
          url("/img/InfinityNikki.jpg") center/cover no-repeat fixed; /* <- your file */
        filter:saturate(105%) brightness(.92);
      }

      /* Header (same vibe as Pop) */
      header.site{
        position:sticky;top:0;z-index:50;
        backdrop-filter:saturate(140%) blur(8px);
        background:rgba(10,11,15,.6);
        border-bottom:1px solid rgba(255,255,255,.06);
      }
      .site .row{display:flex;align-items:center;justify-content:space-between;padding:16px 0;}
      .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.3px}
      .brand img{width:28px;height:28px}
      nav ul{display:flex;gap:16px;list-style:none;margin:0;padding:0}
      nav a{padding:10px 14px;border-radius:999px;color:var(--muted)}
      nav a.active, nav a:hover{color:#fff;background:rgba(255,255,255,.08)}
      .cta{padding:10px 16px;border-radius:999px;background:linear-gradient(135deg,var(--accent),var(--accent-2));font-weight:700}

      /* Hero */
      .hero{padding:56px 0 10px}
      .eyebrow{font-size:.9rem;letter-spacing:.18em;color:var(--muted);text-transform:uppercase}
      h1{font-size:clamp(32px,7vw,64px);margin:8px 0}
      .lead{max-width:760px;color:#cdd1ee;line-height:1.55}

      /* Carousel rail */
      .rail-wrap{position:relative;margin:22px 0 10px}
      .rail{
        display:flex; gap:14px; overflow-x:auto; padding-bottom:10px;
        scroll-snap-type:x mandatory; scroll-padding:20px;
        -webkit-overflow-scrolling:touch;
      }
      .rail::-webkit-scrollbar{height:10px}
      .rail::-webkit-scrollbar-thumb{background:#ffffff22;border-radius:6px}
      .card{
        flex:0 0 auto; width:min(90vw, 520px);
        background:linear-gradient(180deg,#171a27,#10131c);
        border:1px solid rgba(255,255,255,.08);
        border-radius:var(--radius); overflow:hidden;
        box-shadow:0 12px 40px rgba(0,0,0,.35);
        scroll-snap-align:center;
      }
      .frame{
        position:relative; aspect-ratio:16/9; background:#0c0f17;
      }
      .frame img{
        position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
        display:block;
      }
      .meta{display:flex;justify-content:space-between;align-items:center;
        padding:10px 12px;color:var(--muted);font-size:.95rem}
      .open{padding:6px 10px;border-radius:10px;background:#ffffff10;border:1px solid #ffffff22}
      .open:hover{background:#ffffff18}

      /* Arrow buttons */
      .arrow{
        position:absolute; top:40%; translate:0 -50%; z-index:5;
        width:42px; height:42px; border-radius:50%; border:1px solid #ffffff33;
        background:#0b0d16bf; display:grid; place-items:center; cursor:pointer;
        backdrop-filter:blur(4px);
      }
      .arrow:hover{background:#0b0d16}
      .prev{left:-6px} .next{right:-6px}

      /* Lightbox */
      .lightbox{
        position: fixed; inset:0; z-index:100; display:none;
        background: rgba(6,7,10,.86); backdrop-filter: blur(4px);
      }
      .lightbox.show{display:grid; place-items:center}
      .lb-inner{position:relative; max-width:min(92vw,1200px); max-height:88dvh}
      .lb-img{max-width:100%; max-height:88dvh; display:block; border-radius:14px; border:1px solid #ffffff22; box-shadow:0 20px 60px #0009}
      .lb-close, .lb-left, .lb-right{
        position:absolute; top:50%; translate:0 -50%;
        width:48px; height:48px; border-radius:50%; border:1px solid #ffffff33;
        background:#0b0d16cc; display:grid; place-items:center; cursor:pointer;
      }
      .lb-close{top:-20px; right:-20px; translate:0; background:#0b0d16cc}
      .lb-left{left:-64px} .lb-right{right:-64px}
      @media (max-width:780px){ .lb-left{left:-10px} .lb-right{right:-10px} .lb-close{right:10px; top:10px} }

      footer{border-top:1px solid rgba(255,255,255,.08);color:var(--muted);padding:28px 0 56px;margin-top:26px}
    </style>
  </head>

  <body>
    <div class="page">
      <!-- Header -->
      <header class="site">
        <div class="wrap row">
          <a class="brand" href="/">
            <img src="/CapyGoldIcon.png" alt="ParkerPixie capybara icon" />
            <span>ParkerPixie</span>
          </a>
          <nav aria-label="Main">
            <ul>
              <li><a href="/about/">About</a></li>
              <li><a href="/contact/">Contact</a></li>
              <li><a href="/ParkerPixiePaws/">Paws</a></li>
              <li><a class="active" href="/ParkerPixiePop/">Pop</a></li>
            </ul>
          </nav>
          <a class="cta" href="/contact/">Say Hi</a>
        </div>
      </header>

      <main class="wrap">
        <section class="hero">
          <div class="eyebrow">Infinity Nikki</div>
          <h1>Outfits, photo ops, and glitter-goddess energy.</h1>
          <p class="lead">Tap any shot to open it large. Drag/scroll the carousel, or use the arrows.</p>
        </section>

        <!-- Carousel -->
        <section class="rail-wrap" aria-label="Infinity Nikki gallery">
          <button class="arrow prev" type="button" aria-label="Previous">‹</button>
          <div class="rail" id="rail">
            {
              shots.map((src, i) => (
                <figure class="card">
                  <a class="frame open" href={src} data-idx={i}>
                    <img
                      src={src}
                      alt={`Infinity Nikki screenshot ${i+1}`}
                      loading="lazy"
                      decoding="async"
                      sizes="(max-width: 600px) 90vw, 520px"
                    />
                  </a>
                  <figcaption class="meta">
                    <span>Shot {i+1} / {shots.length}</span>
                    <span>Click to open</span>
                  </figcaption>
                </figure>
              ))
            }
          </div>
          <button class="arrow next" type="button" aria-label="Next">›</button>
        </section>
      </main>

      <!-- Lightbox -->
      <div class="lightbox" id="lb" aria-modal="true" role="dialog">
        <div class="lb-inner">
          <img id="lbImg" class="lb-img" alt="">
          <button class="lb-left" id="lbLeft" aria-label="Previous">‹</button>
          <button class="lb-right" id="lbRight" aria-label="Next">›</button>
          <button class="lb-close" id="lbClose" aria-label="Close">✕</button>
        </div>
      </div>

      <footer><div class="wrap">© {year} ParkerPixie · Sass · Shimmer · Sparkle</div></footer>
    </div>

    <script type="module">
      const rail = document.getElementById('rail');
      const prevBtn = document.querySelector('.prev');
      const nextBtn = document.querySelector('.next');

      // Arrow scroll
      const scrollByOne = (dir) => {
        const card = rail.querySelector('.card');
        const step = card ? card.clientWidth + 14 : 540;
        rail.scrollBy({left: dir * step, behavior:'smooth'});
      };
      prevBtn.addEventListener('click', () => scrollByOne(-1));
      nextBtn.addEventListener('click', () => scrollByOne(1));

      // Lightbox
      const lb = document.getElementById('lb');
      const lbImg = document.getElementById('lbImg');
      const left = document.getElementById('lbLeft');
      const right = document.getElementById('lbRight');
      const close = document.getElementById('lbClose');

      const sources = Array.from(document.querySelectorAll('.frame')).map(a => a.getAttribute('href'));
      let idx = 0;

      function show(i){
        idx = (i + sources.length) % sources.length;
        const src = sources[idx];
        lbImg.src = src;
        lbImg.alt = "Infinity Nikki screenshot " + (idx+1);

        // Preload neighbors (helps with big Steam JPGs)
        [idx-1, idx+1].forEach(n=>{
          const j=(n+sources.length)%sources.length;
          const im=new Image(); im.src=sources[j];
        });

        lb.classList.add('show');
        document.body.style.overflow='hidden';
      }
      function hide(){
        lb.classList.remove('show');
        document.body.style.overflow='';
        lbImg.src = "";
      }

      document.querySelectorAll('.frame').forEach(a=>{
        a.addEventListener('click', e=>{
          e.preventDefault();
          show(parseInt(a.dataset.idx,10));
        });
      });

      left.addEventListener('click', ()=> show(idx-1));
      right.addEventListener('click', ()=> show(idx+1));
      close.addEventListener('click', hide);
      lb.addEventListener('click', (e)=>{ if(e.target===lb) hide(); });

      window.addEventListener('keydown', (e)=>{
        if(!lb.classList.contains('show')) return;
        if(e.key==='Escape') hide();
        if(e.key==='ArrowLeft') show(idx-1);
        if(e.key==='ArrowRight') show(idx+1);
      });
    </script>
  </body>
</html>
